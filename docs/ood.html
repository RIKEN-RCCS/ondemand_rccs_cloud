<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>R-CCS Cloud User Manual</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex,nofollow">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>
<body>

  <div class="container-fluid">
    <nav class="sidebar bg-body-secondary">
      <h5 class="ps-3 pe-1 d-inline">Contents</h5><a href="ood_ja.html" style="font-size: 0.75rem;" class="text-decoration-none ms-0">[Japanese]</a>
      <ul class="nav flex-column px-3 py-2">
        <li class="nav-item"><a href="index.html" class="nav-link">1. Introduction</a></li>
        <li class="nav-item"><a href="resource.html" class="nav-link">2. Computational Resources</a></li>
        <li class="nav-item"><a href="storage.html" class="nav-link">3. Storage</a></li>
        <li class="nav-item"><a href="ood.html" class="nav-link">4. Open OnDemand</a></li>
        <li class="nav-item"><a href="terminal.html" class="nav-link">5. Terminal</a></li>
        <li class="nav-item"><a href="other.html" class="nav-link">6. Others</a></li>
      </ul>
    </nav>

    <main class="main-content">
      <h2>4. Open OnDemand</h2>
      <img width="600" alt="Open OnDemand" src="img/ood.png">
      <p>
        The above image shows the Open OnDemand dashboard of the R-CCS Cloud.  
        The table on the right of the R-CCS Cloud logo shows the number of available nodes for each partition.  
        The menu bar above the logo has the following meanings (depending on the browser width, some may appear as icons).
      </p>
      <table class="table">
        <tr><th>Item</th><th>Description</th></tr>
        <tr><td>Interactive Apps</td><td>Interactive applications running on compute nodes</td></tr>
        <tr><td>Passenger Apps</td><td>Applications running on the Open OnDemand server</td></tr>
        <tr><td>My Interactive Sessions</td><td>List of interactive application session information</td></tr>
        <tr><td>Help &rarr; Restart Web Server</td><td>Restart Open OnDemand</td></tr>
        <tr><td>Help &rarr; Manual</td><td>Link to this manual</td></tr>
        <tr><td>Log Out</td><td>Log out</td></tr>
      </table>

      <h3>4.1. Interactive Applications</h3>
      <p>
        Interactive applications are applications that run on compute nodes and can be operated interactively by the user.
      </p>
      <p>
        For example, to use the remote desktop: click the "Desktop" icon, a web form will appear to enter compute resources and other information. After entering the information, click "Launch" to submit a job to the R-CCS Cloud.
      </p>
      <img width="400" alt="Webform of Remote Desktop" src="img/remote_desktop_webform.png">
      <p>
        Immediately after job submission, a screen showing "Queued" will appear, meaning the job is waiting.  
        When the job starts on a compute node, the display changes to "Running" and a "Launch Desktop" button appears.  
        Set appropriate values for "Compression" and "Image Quality", then click "Launch Desktop" to open the remote desktop in your browser.
      </p>
      <p>
        Clicking the "View Only (Share-able Link)" button opens a mirrored remote desktop in a new tab.  
        The mirrored screen cannot be operated.  
        You can share the screen by sending the URL via email, but only among users who have an account on the R-CCS Cloud.
      </p>
      <img width="600" alt="Running Status" src="img/remote_desktop_running.png"><p></p>
      <img width="600" alt="Remote Desktop" src="img/remote_desktop.png">
      <p>
        To terminate the remote desktop, do one of the following. Simply closing the browser will not terminate it:
      </p>
      <ul>
        <li>Click the "Delete" button (as shown in the second previous image).</li>
        <li>Click "My Interactive Sessions" in the menu bar and then click "Delete" for the relevant job.</li>
        <li>From "Applications" at the top left of the remote desktop, click "Log Out".</li>
      </ul>

      <h3>4.2. Batch Jobs</h3>
      <p>
        A batch job is a compute task executed non-interactively by the job scheduler.  
        Batch jobs are written as shell scripts, and required resources (e.g., number of nodes, maximum runtime) are specified with scheduler directives (e.g., <code>#SBATCH -N 4</code>).  
        In R-CCS Cloud Open OnDemand, the application <a target="_blank" href="https://github.com/RIKEN-RCCS/OpenComposer/">Open Composer</a> is provided, making it easy to submit and manage batch jobs.
      </p>
      <p>
        Click the Slurm icon. A web form for generating job scripts will appear.  
        At the top right, "Script Location" specifies where the script will be saved, "Script Name" is the filename, and "Job Name" is the job name (optional).  
        At the bottom left are job input items; filling them updates the job script on the bottom right automatically.  
        After entering, click "Submit" to submit the job to the R-CCS Cloud.
      </p>
      <img width="600" alt="Slurm" src="img/slurm.png">
      <p>
        Once the job is successfully submitted, click the link to the "History page" shown at the top.
      </p>
      <img width="400" alt="Link to History Page" src="img/link_to_history.png">
      <p>
        On the History page, you can view the history of submitted jobs. Each row shows information for one job.  
        The "Cancel Job" button cancels a running job, and the "Delete Info" button removes job info from the table.  
        To perform these actions, check the corresponding checkbox in the leftmost column.
      </p>
      <p>
        The text area and radio buttons at the top right filter jobs displayed in the table.  
        Entering a string in "Filter" shows only jobs related to that string.  
        Radio buttons "All", "Running", "Queued", and "Completed" filter jobs by status.
      </p>
      <img width="600" alt="History Page" src="img/history.png">
      <p>
        Clicking a link in the "Job ID" column displays profiling information retrieved from the scheduler.
      </p>
      <img width="400" alt="Job ID in History Page" src="img/history_jobid.png">
      <p>
        Clicking a link in the "Application" column opens the application page.
      </p>
      <p>
        Clicking a link in the "Script Location" column opens Open OnDemand’s <a href="#file">Home Directory</a>.  
        Clicking the adjacent terminal icon opens <a href="#shell">Terminal for Login Node</a>.
      </p>
      <p>
        Clicking a link in the "Script Name" column opens a window showing the submitted script.  
        Clicking the "Load Parameters" button in that window opens the application page with the parameters preloaded.
      </p>
      <img width="400" alt="Load Parameters" src="img/history_load_parameters.png">

      <h3 id="file">4.3. File Operations</h3>
      <p>Click the Home Directory icon to transfer and edit files. The maximum file size for transfer is 10GB.</p>
      <img width="600" alt="Home Directory" src="img/home_directory.png">
      <p>The functions of the Home Directory are as follows. Operations on individual files or directories can be performed from the "three-dot + triangle" menu.</p>
      <table class="table">
        <tr><th>Toolbar</th><th>Description</th></tr>
        <tr><td>Open in Terminal</td><td>Launch terminal</td></tr>
        <tr><td>Refresh</td><td>Reload the page</td></tr>
        <tr><td>New File</td><td>Create a new file</td></tr>
        <tr><td>New Directory</td><td>Create a new directory</td></tr>
        <tr><td>Upload</td><td>Upload a file</td></tr>
        <tr><td>Download</td><td>Download a file</td></tr>
        <tr><td>Copy/Move</td><td>Copy or move files</td></tr>
        <tr><td>Delete</td><td>Delete files or directories</td></tr>
      </table>

      <table class="table">
        <tr><th>Path Bar</th><th>Description</th></tr>
        <tr><td>&uarr;</td><td>Move up one directory</td></tr>
        <tr><td>Change directory</td><td>Move to a specified directory</td></tr>
        <tr><td>Copy path</td><td>Copy current path to clipboard</td></tr>
      </table>

      <table class="table">
        <tr><th>View Options</th><th>Description</th></tr>
        <tr><td>Show Owner/Mode</td><td>Display owner and permissions</td></tr>
        <tr><td>Show Dotfiles</td><td>Display hidden dotfiles</td></tr>
        <tr><td>Filter</td><td>Filter by filename</td></tr>
      </table>

      <p>Clicking a path in "Passenger Apps" launches the Home Directory starting from that path.</p>
      <img width="200" alt="Click to Home Directory" src="img/home_directory_click.png">
      <p>
        File operations with cloud storage via <a target="_blank" href="https://rclone.org">Rclone</a> are also supported.  
        To configure Rclone, start a remote desktop, open a terminal, and run <code>rclone</code> or <code>rclone-browser</code>.  
        After configuration, click "Help → Restart Web Server" in Open OnDemand’s menu bar, then open the Home Directory to access the configured storage.  
        Note that the R-CCS Cloud Help Desk does not provide support for Rclone configuration.
      </p>

      <h3 id="shell">4.4. Terminal for Login Node</h3>
      <p>Click the Terminal for Login Node icon. You can SSH into the login node via browser and operate with a command-line interface.</p>
      <img width="600" alt="Terminal for Login Node" src="img/shell_access.png">

      <h3>4.5. Job Monitoring</h3>
      <p>Click the Active Jobs icon. You can view and delete job information. Click the button left of "ID" to view details, and the "Actions" column button to cancel a job.</p>
      <img width="600" alt="Active Jobs" src="img/activejobs.png">

      <h3>4.6. Cluster Usage</h3>
      <p>Click the System Status icon to view the usage status of each partition.</p>
      <img width="600" alt="Grafana" src="img/grafana.png">

      <h3>4.7. SSH Public Key Registration</h3>
      <p>Click the SSH Public Key icon. For details, see <a href="index.html#ssh">1.2. Using Terminal Software</a>.</p>
    </main>
  </div>

  <footer class="bg-purple d-flex justify-content-center align-items-center">
    <p class="mb-0 text-white">&copy; RIKEN Center for Computational Science</p>
  </footer>
</body>
</html>
